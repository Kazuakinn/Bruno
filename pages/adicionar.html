<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
</head>

<body>
    <h2>Cadastrando o livro</h2>
    <!--formulário HTML -->
    <form id="meuFormulario">
        <label for="imagem">Imagem URL:</label>
        <input type="text" id="imagem" name="imagem" required /><br>

        <label for="titulo">Título:</label>
        <input type="text" id="titulo" name="titulo" required /><br>

        <label for="genero">Gênero:</label>
        <input type="text" id="genero" name="genero" required /><br>

        <label for="sinopse">Sinopse:</label>
        <textarea id="sinopse" name="sinopse" required></textarea><br>

        <label for="resumo">Resumo:</label>
        <textarea id="resumo" name="resumo" required></textarea><br>

        <!-- botão de envio -->
        <button type="submit" onclick="alert('O livro foi adicionado com sucesso!')">Enviar</button>
    </form>

    <script>
        //  função para processar o formulário
        function processarFormulario() {
            var imagem = document.getElementById('imagem').value;
            var titulo = document.getElementById('titulo').value;
            var genero = document.getElementById('genero').value;
            var sinopse = document.getElementById('sinopse').value;
            var resumo = document.getElementById('resumo').value;

            var dadosString = "<div class='card border' style='width: 18rem;' data-toggle='modal' data-target='#exampleModal1'>" +
                "<img src='" + imagem + "' class='card-img-top w-100 h-100' alt='...' style='object-fit: cover;'>" +
                "<div class='card-body'>" +
                "<h5 class='card-title'>" + titulo + "</h5>" +
                "<p class='card-text'>" + sinopse + "</p>" +
                "</div>" +
                "</div>" +

                // Modal
                "<div class='modal fade' id='exampleModal1' tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel1' aria-hidden='true'>" +
                "<div class='modal-dialog' role='document'>" +
                "<div class='modal-content'>" +
                "<div class='modal-header'>" +
                "<h5 class='modal-title' id='exampleModalLabel1'>" + titulo + "</h5>" +
                "<button type='button' class='close' data-dismiss='modal' aria-label='Fechar'>" +
                "<span aria-hidden='true'>&times;</span>" +
                "</button>" +
                "</div>" +
                "<div class='modal-body'>" +
                "<img src='" + imagem + "' class='card-img-top w-100 h-100' alt='...' style='object-fit: cover;'>" +
                "<h5 class='card-title'>" + titulo + "</h5>" +
                "<p class='card-text'>" + resumo + "</p>" +
                "</div>" +
                "</div>" +
                "</div>" +
                "</div>" +
                "<div id= 'livro'>" +
                "</div>";

            localStorage.setItem('dadosString', dadosString);

            window.location.href = genero + '.html';
        }

        document.addEventListener('DOMContentLoaded', function () {
            var formulario = document.getElementById('meuFormulario');

            formulario.addEventListener('submit', function (event) {
                event.preventDefault(); // Evitar o envio do formulário padrão
                processarFormulario();
            });
        });
    </script>

</body>

</html>